import React, { useEffect, useRef } from "react";
import KUTE from "kute.js";

type BubbleProps = {
  className?: string;
  containerClassName?: string;
};

export default function Bubble({ className, containerClassName }: BubbleProps) {
  const bubbleBlobRef = useRef(null);

  useEffect(() => {
    const tween = KUTE.fromTo(
      bubbleBlobRef.current,
      { path: "#bubble-blob1" },
      { path: "#bubble-blob2" },
      { repeat: 999, duration: 6000, yoyo: true },
    );
    tween.start();

    return () => {
      if (tween.cancel) {
        tween.cancel();
      }
    };
  }, []);

  return (
    <div
      className={`curve-container w-full max-w-600 mx-auto ${containerClassName}`}
    >
      <svg
        id="visual"
        viewBox={`0 0 600 500`}
        className={`${className} w-[600px] w-[500px]`}
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        version="1.1"
      >
        <path
          ref={bubbleBlobRef}
          id="bubble-blob1"
          className="fill-black/10"
          d="m 356.29271,58.625123 c 63.80372,13.698159 172.20108,-12.863057 204.98077,9.905039 32.7797,22.768098 30.53441,70.664218 24.65831,129.903878 -8.80771,60.60989 -27.8575,168.27233 -46.78085,211.52291 -18.92334,43.25058 -72.48108,77.35993 -127.00496,85.24179 -54.62456,7.90785 -96.84455,-49.34425 -160.80272,-40.10401 C 187.46273,464.2255 115.19177,500.8326 67.040287,492.31312 18.788183,483.81955 -5.4680733,430.14186 1.0410124,380.16243 7.5730845,330.26651 28.004693,276.06509 36.081218,224.33993 44.258385,172.58883 39.979821,123.33996 57.943393,77.384989 76.007605,31.404091 133.12507,-3.0860878 187.27851,0.21901818 241.3313,3.5500642 292.56668,44.817501 356.29271,58.625123"
        />
        <g style={{ visibility: "hidden" }}>
          <path
            id="bubble-blob2"
            d="m 591.79515,95.363171 c 22.16359,53.181729 -16.80138,79.972549 -17.94744,142.734099 0.28422,62.96512 7.73494,101.30832 6.94406,143.9833 -1.90184,59.7612 -19.40731,101.59019 -72.98828,111.63795 C 454.14065,503.66316 364.61015,467.85265 308.90443,461.69083 253.21945,455.44842 243.0497,450.48065 147.142,455.0056 60.481676,470.18337 30.162292,449.9379 21.879979,384.59658 14.780774,328.58871 41.129525,262.0814 42.386722,214.09889 43.933871,155.05061 20.110365,111.39778 32.215588,71.498383 44.832775,23.585267 84.497747,22.416508 142.48294,42.257392 258.23495,73.203855 231.41597,78.208602 338.6481,79.371992 405.419,80.0964 554.12034,21.224906 591.79515,95.363171"
          />
        </g>
      </svg>
    </div>
  );
}
